\section{Introdução} \label{sec:intro}

%\begin{table}[ht]
%\centering
%\caption{Variables to be considered on the evaluation of interaction
%  techniques}
%\label{tab:exTable1}
%\includegraphics[width=.7\textwidth]{table.jpg}
%\end{table}

O compartilhamento de recursos computacionais através de grids computacionais é útil porque permite que os recursos sejam melhor aproveitados. Tempo ocioso. O investimento é diluído entre domínios administrativos.

Vamos falar agora de computação (vs. armazenamento, rede etc.). Em grids voluntárias [talvez o termo voluntárias não seja bom, confunde com folding@home] não há garantia de que os recursos serão obtidos. Com poucos recursos disponíveis as tarefas podem demorar mais do que o desejado, diminuindo a utilidade do resultado (sistemas de tempo real não crítico - ver função de utilidade).

Por outro lado, existe utility computing, um modelo de negócio em que o usuário obtém recursos rapidamente (rapid provisioning, elastic computing) e paga pelo tempo de uso em um grão pequeno.

Tendo acesso a um provedor de utility computing, um usuário pode optar por gastar dinheiro alugando infra-estrutura a fim de completar suas tarefas em menos tempo. Com os middlewares atuais [cuidado!], o escalonamento de tarefas entre o grid e o provedor de utility deve ser feito pelo usuário.

Este trabalho tem o intuito de avaliar as modificações necessárias em um middleware de grid, o OurGrid \cite{ougrid}, para habilitá-lo a um cenário híbrido, em que dispõe de recursos do grid e do provedor de utility computing, em particular o Amazon AWS (Amazon Web Services)
(adaptações)

\section{Utility Computing} \label{sec:utility}

Utilizaremos aqui o Amazon AWS porque é barato, a adesão é fácil (basta dar o número do cartão de crédito) e a documentação é abundante. Nossa solução pode, no entanto, ser aplicada a qualquer serviço similar, como o AppNexus ou ....

O Amazon possui um serviço denominado EC2 (Elastic Computing/er Cloud) em que o usuário pode executar instâncias de imagens de máquinas virtuais. As imagens são armazenadas no serviço Amazon S3 (Simple Storage Service). Existem imagens públicas armazenadas no S3 que podem ser usadas por qualquer usuário sem custo adicional.

As instâncias podem ser m1.small, medium, large...

Um usuário inicia instâncias através de uma interface programática, e em poucos minutos a instância está rodando. O encerramento de instâncias é feito da mesma forma. Cada usuário pode, a princípio, rodar até 20 instâncias de máquinas virtuais, mas o limite máximo pode ser negociado com o provedor.

O serviço mede o tempo em que cada instância está ativa. O valor cobrado pela execução de uma instância é proporcional à quantidade de horas em que a instância está ativa (arredondado pra cima). 

\section{OurGrid} \label{sec:ourgrid}

O OurGrid é um middleware de grid para bag-of-tasks, ou seja, tarefas que podem ser executadas independentemente, sem comunicação entre as tarefas.

O OurGrid funciona como uma rede de favores para combater free riders.

Comunicação é feita com XMPP. Cada componente possui um par de chaves

Arquitetura formada por Broker, Worker, Peer.
[figura]

\section{Proposta (requisitos)} \label{sec:proposta}

R1 Usar recursos do provedor não deve ser mais difícil do que usar recursos da grade. Usar recursos do provedor e da grade, simultaneamente, deve ser igualmente fácil.
R2 O usuário deve ter controle sobre a execução das instâncias, a fim de ter controle sobre o dinheiro gasto. O objetivo aqui é minimizar o tempo da tarefa sujeito a restrições financeiras. (Outra possibilidade, aqui não abordada, é minimizar o gasto sujeito a restrições de tempo, o que caracterizaria um sistema de tempo real rígido)

(Naturalmente R2 contradiz R1, porque exige uma intervenção a mais do usuário)

\section{Design e Implementação} \label{sec:design}

Broker solicita N instâncias por no máximo H horas (de forma a estabelecer um limite no dinheiro gasto)
Cada instância possui um Worker.
Uma das instâncias possui um Peer?
Broker ganha a habilidade de instanciar Workers diretamente, sem precisar solicitar a um Peer?
Worker vanilla.
Ao fim do processamento, o Broker doa a instância para um Peer pelo tempo que resta do crédito já pago?

-- Considerações

É seguro?
É eficiente? (financeiramente)

Naturalmente a política de solicitação de recursos que o Broker utiliza será diferente quando um provedor de utility está envolvido. Pode não ser vantajoso solicitar 20 instâncias para usar durante 15 min, já que o valor cobrado dá direito a 1 hora de uso.

\section{Avaliação / Experiência} \label{sec:avaliacao}

Experimentamos com instâncias m1.small.

Tempo até a tarefa terminar = tempo de espera + tempo de execução + tempo de transferência do resultado (se bem que o resultado pode ser armazenado no S3, a transferência é rápida)

Nossos experimentos avaliaram que o tempo de espera é de, em média, X minutos. Acreditamos que esse tempo pode ser reduzido se criarmos uma instalação de Linux mais enxuta.

overhead

\section{Trabalhos Relacionados} \label{sec:trabrel}

Hadoop
% http://wiki.apache.org/hadoop/AmazonEC2
% http://developer.amazonwebservices.com/connect/entry.jspa?externalID=873

GridGain
% http://blog.griddynamics.com/2008/07/gridgain-on-ec2.html

Globus Science Cloud
% http://workspace.globus.org/clouds/

\section{Conclusão} \label{sec:conclusao}

Implementar algoritmos de escalonamento que levem em consideração o fator custo financeiro.
Avaliar cenários em que vários Brokers querem compartilhar recursos do provedor de utility (maior utilização do recurso já pago, conta rachada)?
